<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Secure payment checkout powered by Primer Universal Checkout">
    
    <title>Primer Checkout Demo - Secure Payment Processing</title>
    
    <!-- Optimized CSS (8KB vs 82KB Tailwind CDN) -->
    <link rel="stylesheet" href="css/checkout.css">
    
    <!-- Performance & Security -->
    <link rel="dns-prefetch" href="https://sdk.primer.io">
    <link rel="preconnect" href="https://sdk.primer.io" crossorigin>
    
    <!-- SEO & Social -->
    <meta property="og:title" content="Primer Checkout Demo">
    <meta property="og:description" content="Experience secure payment processing with Primer Universal Checkout">
    <meta property="og:type" content="website">
    
    <!-- Icons -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>💳</text></svg>">
</head>

<body>
    <!-- Header -->
    <header class="container mx-auto py-6">
        <div class="text-center">
            <h1 class="text-2xl font-bold text-gray-900 mb-2">
                💳 Primer Checkout Demo
            </h1>
            <p class="text-gray-600">Secure payment processing with Universal Checkout</p>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto">
        <div class="max-w-md mx-auto">
            <!-- Status Messages Container -->
            <div id="message-container" class="mb-4"></div>

            <!-- Product Display -->
            <div id="product-display" class="card mb-6">
                <div class="text-center mb-6">
                    <div class="text-6xl mb-4">👕</div>
                    <h2 class="text-xl font-semibold text-gray-900 mb-2">Premium Primer Hoodie</h2>
                    <p class="text-gray-600">Comfortable, stylish, and perfect for developers</p>
                </div>

                <!-- Price Display -->
                <div class="price-display" id="display-price">£49.99</div>

                <!-- Payment Configuration -->
                <div class="grid grid-cols-1 gap-4 mb-6">
                    <div>
                        <label for="amount-input" class="form-label">Amount:</label>
                        <input 
                            type="number" 
                            id="amount-input" 
                            class="form-input"
                            value="49.99" 
                            step="0.01" 
                            min="0.01" 
                            max="9999.99"
                            placeholder="Enter amount"
                        >
                    </div>
                    
                    <div>
                        <label for="currency-select" class="form-label">Currency:</label>
                        <select id="currency-select" class="form-input">
                            <option value="GBP">🇬🇧 British Pound (GBP)</option>
                            <option value="USD">🇺🇸 US Dollar (USD)</option>
                            <option value="EUR">🇪🇺 Euro (EUR)</option>
                            <option value="JPY">🇯🇵 Japanese Yen (JPY)</option>
                        </select>
                    </div>

                    <div>
                        <label for="customer-email-input" class="form-label">Email (for vault & receipts):</label>
                        <input 
                            type="email" 
                            id="customer-email-input" 
                            class="form-input"
                            placeholder="customer@example.com"
                        >
                    </div>
                </div>
            </div>

            <!-- Checkout Button -->
            <div id="checkout-button-container" class="text-center mb-6">
                <button id="checkout-button" class="primary-btn w-full">
                    <svg id="checkout-icon" class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
                    </svg>
                    <div id="loading-spinner" class="spinner hidden mr-2"></div>
                    <span id="button-text">Start Secure Checkout</span>
                </button>
            </div>

            <!-- Primer Checkout Container -->
            <div id="primer-container" class="hidden card"></div>

            <!-- Developer Debug Panel -->
            <div id="debug-panel" class="mt-8 mb-6">
                <button 
                    id="debug-toggle" 
                    class="w-full bg-gray-800 text-white py-2 px-4 rounded-lg font-medium hover:bg-gray-700 transition-colors flex items-center justify-center"
                >
                    <span id="debug-toggle-text">🛠️ Show Developer Debug Panel</span>
                    <svg id="debug-toggle-icon" class="w-4 h-4 ml-2 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                    </svg>
                </button>
                
                <div id="debug-content" class="hidden mt-4 bg-gray-50 rounded-lg p-6 border">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Client Token Section -->
                        <div class="space-y-4">
                            <h3 class="text-lg font-semibold text-gray-800 border-b pb-2">🔑 Client Token</h3>
                            <div>
                                <label for="client-token-input" class="form-label">Custom Client Token:</label>
                                <textarea 
                                    id="client-token-input" 
                                    rows="3" 
                                    placeholder="Paste your client token here to override auto-generation..."
                                    class="form-input font-mono text-xs"
                                ></textarea>
                            </div>
                            <div class="flex gap-2">
                                <button id="use-custom-token" class="flex-1 bg-blue-600 text-white py-2 px-3 rounded text-sm hover:bg-blue-700">
                                    Use Custom Token
                                </button>
                                <button id="clear-custom-token" class="flex-1 bg-gray-600 text-white py-2 px-3 rounded text-sm hover:bg-gray-700">
                                    Clear & Auto-Generate
                                </button>
                            </div>
                            <div>
                                <label class="form-label">Current Token Status:</label>
                                <div id="token-status" class="text-xs bg-white p-2 rounded border font-mono text-gray-600">
                                    Auto-generated from session
                                </div>
                            </div>
                        </div>
                        
                        <!-- Scenario Simulation -->
                        <div class="space-y-4">
                            <h3 class="text-lg font-semibold text-gray-800 border-b pb-2">🎭 Test Scenarios</h3>
                            <div class="grid grid-cols-2 gap-2">
                                <button class="scenario-btn bg-green-600 text-white py-2 px-3 rounded text-sm hover:bg-green-700" data-scenario="success">
                                    ✅ Success Case
                                </button>
                                <button class="scenario-btn bg-red-600 text-white py-2 px-3 rounded text-sm hover:bg-red-700" data-scenario="declined">
                                    ❌ Card Declined
                                </button>
                                <button class="scenario-btn bg-yellow-600 text-white py-2 px-3 rounded text-sm hover:bg-yellow-700" data-scenario="vault">
                                    💾 Vault Customer
                                </button>
                                <button class="scenario-btn bg-purple-600 text-white py-2 px-3 rounded text-sm hover:bg-purple-700" data-scenario="guest">
                                    👤 Guest Checkout
                                </button>
                                <button class="scenario-btn bg-blue-600 text-white py-2 px-3 rounded text-sm hover:bg-blue-700" data-scenario="subscription">
                                    🔄 Subscription
                                </button>
                                <button class="scenario-btn bg-indigo-600 text-white py-2 px-3 rounded text-sm hover:bg-indigo-700" data-scenario="3ds">
                                    🛡️ 3DS Required
                                </button>
                            </div>
                            <div>
                                <label class="form-label">Quick Amount Presets:</label>
                                <div class="grid grid-cols-4 gap-2">
                                    <button class="amount-btn bg-gray-600 text-white py-1 px-2 rounded text-xs hover:bg-gray-700" data-amount="1.00">
                                        £1.00
                                    </button>
                                    <button class="amount-btn bg-gray-600 text-white py-1 px-2 rounded text-xs hover:bg-gray-700" data-amount="9.99">
                                        £9.99
                                    </button>
                                    <button class="amount-btn bg-gray-600 text-white py-1 px-2 rounded text-xs hover:bg-gray-700" data-amount="49.99">
                                        £49.99
                                    </button>
                                    <button class="amount-btn bg-gray-600 text-white py-1 px-2 rounded text-xs hover:bg-gray-700" data-amount="99.99">
                                        £99.99
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Style Editor -->
                        <div class="lg:col-span-2 space-y-4">
                            <h3 class="text-lg font-semibold text-gray-800 border-b pb-2">🎨 Primer Style Editor</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="form-label">Theme Presets:</label>
                                    <select id="theme-preset" class="form-input">
                                        <option value="default">Default Theme</option>
                                        <option value="dark">Dark Theme</option>
                                        <option value="minimal">Minimal Theme</option>
                                        <option value="colorful">Colorful Theme</option>
                                        <option value="custom">Custom Theme</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="form-label">Locale:</label>
                                    <select id="locale-select" class="form-input">
                                        <option value="en-US">English (US)</option>
                                        <option value="fr-FR">French (France)</option>
                                        <option value="de-DE">German (Germany)</option>
                                        <option value="es">Spanish</option>
                                        <option value="it-IT">Italian (Italy)</option>
                                        <option value="ja-JP">Japanese (Japan)</option>
                                        <option value="ar">Arabic (RTL)</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div>
                                <label for="style-editor" class="form-label">
                                    Custom Style JSON:
                                    <span class="text-xs text-gray-500">(Edit to customize Primer checkout appearance)</span>
                                </label>
                                <textarea 
                                    id="style-editor" 
                                    rows="8" 
                                    placeholder="Enter custom Primer style configuration as JSON..."
                                    class="form-input font-mono text-xs"
                                ></textarea>
                            </div>
                            
                            <div class="flex gap-2">
                                <button id="apply-style" class="bg-indigo-600 text-white py-2 px-4 rounded text-sm hover:bg-indigo-700">
                                    Apply Style & Restart Checkout
                                </button>
                                <button id="reset-style" class="bg-gray-600 text-white py-2 px-4 rounded text-sm hover:bg-gray-700">
                                    Reset to Default
                                </button>
                                <button id="copy-style" class="bg-green-600 text-white py-2 px-4 rounded text-sm hover:bg-green-700">
                                    Copy Style JSON
                                </button>
                            </div>
                            
                            <!-- Documentation Link -->
                            <div class="text-xs text-gray-600 bg-blue-50 p-3 rounded">
                                <strong>💡 Tip:</strong> See <a href="https://primer.io/docs/checkout/drop-in/customization/web" target="_blank" class="text-blue-600 underline">Primer Style Documentation</a> for all available options.
                            </div>
                            
                            <!-- Production Note -->
                            <div class="production-note">
                                <strong>⚠️ Production Ready:</strong> This optimized version uses custom CSS (8KB) instead of Tailwind CDN (82KB). 
                                For further optimization, install Tailwind locally: <code>npm install tailwindcss</code>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="text-center py-6 text-gray-500 text-sm">
        <p>Powered by <a href="https://primer.io" target="_blank" class="text-blue-600 underline">Primer</a> Universal Checkout</p>
    </footer>

    <!-- Scripts -->
    <script src="https://sdk.primer.io/web/v2.57.5/sdk.js"></script>
    <script src="js/app.js"></script>
    <script src="js/debug-panel.js"></script>
    
    <!-- Initialize Debug Panel -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            if (window.primerApp && window.DebugPanel) {
                window.debugPanel = new DebugPanel(window.primerApp);
            }
        });

        // Suppress Tailwind CDN warning for production (since we're using custom CSS)
        if (typeof console !== 'undefined' && console.warn) {
            const originalWarn = console.warn;
            console.warn = function(...args) {
                if (args[0] && typeof args[0] === 'string' && 
                    args[0].includes('Tailwind CSS') && 
                    args[0].includes('rebuild')) {
                    return; // Suppress Tailwind rebuild warning
                }
                originalWarn.apply(console, args);
            };
        }
    </script>
</body>
</html>
